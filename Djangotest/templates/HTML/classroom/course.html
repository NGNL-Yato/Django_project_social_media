{% load static %}


<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>course name</title>

   <!-- font awesome cdn link  -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css">
   

   

   <!-- custom css file link  -->
   <link rel="stylesheet" href="/static/CSS/classroom/home.css">
   <link rel="stylesheet" href="/static/CSS/classroom/course.css">


</head>
<body>
    <header class="header">
   
        <section class="flex">
     
         <div class="logo">
            <h2>
                <em>Campus</em>
                <span>Classroom</span>
            </h2>
        </div>
           <div class="icons">
              <div id="menu-btn" class="fas fa-bars"></div>
              <div id="search-btn" class="fas fa-search"></div>
              <!-- <div id="user-btn" class="fas fa-plus"></div> -->
              <div id="toggle-btn" class="fas fa-sun"></div>
           </div>
     
           <!-- <div class="profile" style="height:120px">
             <h3 class="name">Rejoindre un cours</h3>
             <input type="text" name="code" placeholder="course code " style="padding-top:20px">
             <a  href="#" class="join_btn" style="background-color: rgb(238, 97, 174); height:40px">Join</a>
             </div> -->
         
     
        </section>
     
     </header>  
     <div class="side-bar">

      <div id="close-btn">
         <i class="fas fa-times"></i>
      </div>
   
      <div class="profile">
         <img src="/media/{{userdata.utilisateur.profile_picture}}" class="image" alt="">
         <h3 class="name"> {{userdata.first_name}} {{userdata.last_name }}</h3>
      {% if userdata.utilisateur.role is 2 %}   
         <p class="role">student</p>
       {% elif  userdata.utilisateur.role is 1 %}
       <p class="role">Professeur</p>
       {% else %}
       <p class="role">Entreprise</p>
       {% endif %}
       </div>
   
      <nav class="navbar">
         <a href="{% url 'Classroom' %}"><i class="fas fa-home"></i><span>home</span></a>
         <a href="#"><i class="fas fa-graduation-cap"></i><span>courses</span></a>
         <a href="#"><i class="fas fa-box-archive"></i><span>archived courses</span></a>
         <a href="Todo"><i class="fas fa-check"></i><span>To Do</span></a>
         <a href="{% url 'settings' %}"><i class="fas fa-gear"></i><span>Settings</span></a>
   
      </nav>
   
   </div>
   <section class="home-grid">
      <div class="box-container">

         <div class="box box1">
            <input type="range" value="1" min="1" max="3" id="range">
          <ul class="tab-name">
            <li value="1"><a href="general.html" class="general">General</a> </li>
            <li value="2"><a href="todo.html" class="todo">To do</a></li>
            <li value="3"><a href="participants.html" class="participants">All participants </a>  
            </li>
            </ul>
            </div>


            <div class="head" style="background-color:rgb(246, 132, 177);align-items: center;display: flex;margin-top:20px;justify-content: space-between;">
               
               <div class="" style="margin: 25px;margin-bottom: -5%;">
                  <img src="/media/{{classroomDetails.ClassRoomimage}}" style="height : 200px;width: 200px;">
               </div>

               <div class="infos" style="width: 70%;margin: 2%;">
                  <h3>{{classroomDetails.ClassRoomtitle}}</h3>

                  <h3  style="font-size:16px;margin-left:30px">{{classroomDetails.Admin_Professor.utilisateur.user.first_name}} {{classroomDetails.Admin_Professor.utilisateur.user.last_name}}</h3>
                  <p style="font-size:12px;margin-left:30px;margin-top: 10px;"> {{classroomDetails.description}} </p>
                  <h5 style="float: right;">Code d'invitaton: {{classroomDetails.UniqueinvitationCode}}</h5>
               </div>
               
            </div>
            <button onclick="deleteClassroom('{{classroomDetails.UniqueinvitationCode}}')" style="float: right;padding: 10px;background-color: #eb437e;color: white;font-weight: 300;font-size: 16px;margin-top: 15px;">Delete Classroom</button>

               {% if userdata.utilisateur.role is 1 %}
               <div style="margin-top: 80px;width: 100%;padding: 10px;background-color: rgb(255, 255, 255);"> 
                     <!--  including post form  -->
                     <div style="height: auto; width: 100%;display: flex;justify-content: center;color: #eb437e;">
                     {% include 'HTML/classroom/create_classroom_post.html'%}
                  </div>

               </div>
               {% else %}
               <div style="height: 90px;">

               </div>
               {% endif %}

               <div>
                  
                  <div style="height: auto;background-color: transparent;color: black;">
                     <div class="prof-post" style="height: 80px;background-color: transparent;">

                        {% for post in classroom_posts %}
                        <!-- generate posts  -->
                        <div style="margin-top: 20px;background-color: #eb437e;">

                           <div style="width: auto;display: flex;align-items: center;justify-content: start;margin-left: 2%;">
                              <img src="/media/{{ post.author.utilisateur.profile_picture}}" style="height: 60px;width: 60px;border-radius: 50%;padding: 10px;" alt="">
                              <div style="color: aliceblue;">
                                 <h3  style="font-size:18px;margin-left:10px">{{ post.author.utilisateur.user.first_name}} {{ post.author.utilisateur.user.last_name}} </h3>
                              <h4 style="margin-top: 0px;margin-left: 20px;">{{ post.created_at }}</h4>
                        
                           </div> 
                           {% if post.author.utilisateur.id == userdata.utilisateur.id %}
                           <div style="width: 78%;">
                              <i onclick="deleteclassroomPost('{{post.id}}')" style="float: right;color: white;font-size: 20px;" class="fa-solid fa-trash"></i>
                           </div>
                           {% endif %}

                           </div>
      
                           <div style="background-color: rgb(255, 255, 255); padding: 10px;display: block;justify-content: start;align-items: center;">
                              <div style="width:auto;margin-inline: 5%;padding: 10px;" >
                              <h4 style="font-size: 18px;">{{post.contentPost}}</h4>
                              </div>
                              {% if post.filePost %}
                              <div style="width: 100%;margin-left: 4%;padding: 8px;">
                                 <button onclick="clicktodownlaodfile('{{post.filePost}}')" style="background-color: #eb437e;color: aliceblue;padding: 18px;border-radius: 10px;">
                                    Download File
                                 </button>
                              </div>
                              {% endif %}
                           </div>
                        </div>
                           <!-- end post -->
                        {% endfor %}

                        <div style="height: 80px;padding: 0;margin: 0;"></div>
                  </div>
               
               </div>

            </div>
            
         </div>
         
      </section>
      
   <script>
      function deleteclassroomPost(id){
      window.location.href = '/deleteClassroomPost/'+id
      }

      function deleteClassroom(classroomuid) {
      window.location.href = '/deleteClassroom/'+classroomuid
      }

     function clicktodownlaodfile(filepath){
      window.location.href = '/media/'+filepath
     }
   </script>
   <script src ="/static/Javascript/classroom/classroom.js"></script>
   </body>
   </html>
